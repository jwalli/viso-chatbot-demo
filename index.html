<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visco Chatbot Demo - Viewport Fix</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Test Status Banner */
        .test-banner {
            background: linear-gradient(135deg, #4caf50, #45a049);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .test-banner h2 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        /* Chat Demo Section */
        .chat-demo {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 40px;
            text-align: center;
        }

        .chat-demo h3 {
            color: #333;
            font-size: 2em;
            margin-bottom: 20px;
        }

        .chat-demo .description {
            color: #666;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Chat Success Indicator */
        .chat-success {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border: 2px solid #4caf50;
            border-radius: 15px;
            padding: 40px 20px;
            margin: 30px 0;
            text-align: center;
            position: relative;
        }

        .chat-success .icon {
            font-size: 4em;
            margin-bottom: 20px;
            color: #4caf50;
        }

        .chat-success h4 {
            color: #2e7d32;
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .chat-success p {
            color: #388e3c;
            font-size: 1.1em;
            line-height: 1.6;
        }

        /* Position Indicator */
        .position-indicator {
            position: absolute;
            top: 20px;
            left: 20px;
            background: #667eea;
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            font-size: 0.9em;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* Debug Info */
        .debug {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #4caf50, #45a049);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 14px;
            z-index: 9999;
            max-width: 300px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        /* AGGRESSIVE CHAT-POSITIONIERUNG IM VIEWPORT */
        langflow-chat {
            /* Basis-Positionierung */
            position: fixed !important;
            top: 80px !important;
            left: 20px !important;
            bottom: auto !important;
            right: auto !important;
            z-index: 9998 !important;
            
            /* Gr√∂√üe */
            width: 400px !important;
            max-width: calc(100vw - 40px) !important;
            height: auto !important;
            max-height: calc(100vh - 100px) !important;
            
            /* Reset alle m√∂glichen Offsets */
            margin: 0 !important;
            transform: translate(0, 0) !important;
            
            /* Sichtbarkeit sicherstellen */
            visibility: visible !important;
            opacity: 1 !important;
            display: block !important;
        }

        /* Alle Kinder-Elemente zur√ºcksetzen */
        langflow-chat *,
        langflow-chat > div,
        langflow-chat iframe,
        langflow-chat [class*="chat"],
        langflow-chat [class*="widget"],
        langflow-chat [class*="container"],
        langflow-chat [class*="wrapper"] {
            position: relative !important;
            top: auto !important;
            left: auto !important;
            bottom: auto !important;
            right: auto !important;
            margin: 0 !important;
            transform: none !important;
        }

        /* Mobile Anpassung */
        @media (max-width: 500px) {
            langflow-chat {
                width: calc(100vw - 20px) !important;
                left: 10px !important;
                top: 70px !important;
                max-height: calc(100vh - 80px) !important;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .chat-demo {
                padding: 20px;
            }
            
            .container {
                padding: 20px 10px;
            }
            
            .debug {
                top: 10px;
                right: 10px;
                font-size: 12px;
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>ü§ñ Visco Chatbot</h1>
        <p>Viewport-Fix Version</p>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Test Banner -->
        <div class="test-banner">
            <h2>üéØ VIEWPORT-FIX AKTIV</h2>
            <p>Chat wird jetzt direkt im sichtbaren Bereich positioniert (80px von oben)!</p>
        </div>

        <!-- Chat Demo Section -->
        <div class="chat-demo">
            <h3>Chat im Viewport</h3>
            <div class="description">
                Der Chat wird jetzt <strong>80px vom oberen Rand</strong> positioniert, 
                damit er definitiv im sichtbaren Viewport-Bereich erscheint.
            </div>

            <div class="chat-success">
                <div class="icon">üéØ</div>
                <h4>Viewport-Positionierung aktiv!</h4>
                <p><strong>Position:</strong> 80px von oben, 20px von links<br>
                   <strong>Sichtbarkeit:</strong> Garantiert im Viewport<br>
                   <strong>Gr√∂√üe:</strong> 400px breit (responsive)<br>
                   <strong>Mobile:</strong> Vollbreite minus R√§nder</p>
                <div class="position-indicator">
                    üìç Chat hier im Viewport!
                </div>
            </div>
        </div>
    </div>

    <!-- Debug Info -->
    <div class="debug">
        ‚úÖ Viewport-Fix aktiv!<br>
        Position: 80px top, 20px left<br>
        <small>Garantiert sichtbar</small>
    </div>

    <!-- Chatbot Integration -->
    <script src="https://cdn.jsdelivr.net/gh/logspace-ai/langflow-embedded-chat@v1.0.7/dist/build/static/js/bundle.min.js"></script>
    
    <script>
        console.log('üéØ Viewport-Fix f√ºr Langflow Chat');
        
        function forceViewportPosition() {
            const langflowChat = document.querySelector('langflow-chat');
            if (langflowChat) {
                console.log('‚úÖ Langflow-Chat gefunden, forciere Viewport-Position');
                
                // Aggressive Positionierung
                langflowChat.style.setProperty('position', 'fixed', 'important');
                langflowChat.style.setProperty('top', '80px', 'important');
                langflowChat.style.setProperty('left', '20px', 'important');
                langflowChat.style.setProperty('bottom', 'auto', 'important');
                langflowChat.style.setProperty('right', 'auto', 'important');
                langflowChat.style.setProperty('z-index', '9998', 'important');
                langflowChat.style.setProperty('width', '400px', 'important');
                langflowChat.style.setProperty('max-width', 'calc(100vw - 40px)', 'important');
                langflowChat.style.setProperty('height', 'auto', 'important');
                langflowChat.style.setProperty('max-height', 'calc(100vh - 100px)', 'important');
                langflowChat.style.setProperty('margin', '0', 'important');
                langflowChat.style.setProperty('transform', 'translate(0, 0)', 'important');
                langflowChat.style.setProperty('visibility', 'visible', 'important');
                langflowChat.style.setProperty('opacity', '1', 'important');
                langflowChat.style.setProperty('display', 'block', 'important');
                
                console.log('‚úÖ Viewport-Position forciert');
                
                // Debug-Info
                const rect = langflowChat.getBoundingClientRect();
                console.log(`üìç Chat Position: ${rect.top}px top, ${rect.left}px left`);
                console.log(`üìè Chat Gr√∂√üe: ${rect.width}px √ó ${rect.height}px`);
                
            } else {
                console.log('‚è≥ Warte auf Langflow-Chat...');
            }
        }
        
        // Mehrfache Ausf√ºhrung mit verschiedenen Delays
        setTimeout(forceViewportPosition, 100);
        setTimeout(forceViewportPosition, 500);
        setTimeout(forceViewportPosition, 1000);
        setTimeout(forceViewportPosition, 2000);
        setTimeout(forceViewportPosition, 3000);
        
        // MutationObserver f√ºr kontinuierliche √úberwachung
        const observer = new MutationObserver((mutations) => {
            let shouldReposition = false;
            
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList' || mutation.type === 'attributes') {
                    shouldReposition = true;
                }
            });
            
            if (shouldReposition) {
                setTimeout(forceViewportPosition, 100);
            }
        });
        
        observer.observe(document.body, {
            childList: true,
            subtree: true,
            attributes: true,
            attributeFilter: ['style', 'class']
        });
        
        // Window events
        window.addEventListener('load', () => {
            setTimeout(forceViewportPosition, 1000);
        });
        
        window.addEventListener('resize', () => {
            forceViewportPosition();
        });
        
        // Intervall als Fallback
        setInterval(forceViewportPosition, 5000);
        
        console.log('‚úÖ Viewport-Fix System gestartet');
    </script>
    
    <langflow-chat
        window_title="Visco"
        flow_id="04342e71-2daa-4384-9792-b4d7765f6f9b"
        host_url="https://langflowailangflowlatest-production-aec5.up.railway.app">
    </langflow-chat>
</body>
</html>
